# Работа с уровнями изоляции транзакции в PostgreSQL

1. Поставил Ubuntu 20.04 как под систему Windows для Linux (WSL)
2. Сгенерировал ssh ключи ![5273775353778796019.jpg](images/5273775353778796019.jpg)
3. Добавил ключ в authorized_keys ![5273775353778796018.jpg](images/5273775353778796018.jpg)
4. Отключил авторизацию по паролю и включил авторизацию по ключу ![5273775353778796025.jpg](images/5273775353778796025.jpg) ![5273775353778796024.jpg](images/5273775353778796024.jpg)
5. Сначала отправил файл с неверным ssh ключом и получил отказ в доступе ![5273775353778796020.jpg](images/5273775353778796020.jpg)
6. Потом сделал подключение через верный ключ и получил доступ к ВМ и зашел внутрь(первая сессия)![5273775353778796023.jpg](images/5273775353778796023.jpg)
7. Поставил 3 разные версии PostgreSQL, запустил 3 кластера и поделал различные операции по ним(в конце 17 оставил включенным) ![5273775353778796037.jpg](images/5273775353778796037.jpg) 
8. Зашёл во вторую сессию ![5273775353778796027.jpg](images/5273775353778796027.jpg)
9. Запустил везде psql ![5273775353778796022.jpg](images/5273775353778796022.jpg) ![5273775353778796030.jpg](images/5273775353778796030.jpg)
10. В первой сессии создал новую таблицу и наполнил её данными ![5273775353778796028.jpg](images/5273775353778796028.jpg)
11. Посмотрел уровень изоляции по умолчанию в PostgreSQL ![5273775353778796021.jpg](images/5273775353778796021.jpg)
12. В первой сессии добавил новую запись в таблицу ![5273775353778796026.jpg](images/5273775353778796026.jpg)
13. Сделал селект в другой сессии(не получил новую запись, так как транзация не завершена в первой сессии, а уровень изоляции по умолчанию READ COMMITTED) ![5273775353778796029.jpg](images/5273775353778796029.jpg) 
14. Завершаю первую транзакцию и снова делаю селект в другой сессии(получил новую запись) ![5273775353778796032.jpg](images/5273775353778796032.jpg)
15. Меняю для сессий уровень изоляции на REPEATABLE READ ![5273775353778796031.jpg](images/5273775353778796031.jpg)
16. В первой сессии добавил новую запись в таблицу ![5273775353778796033.jpg](images/5273775353778796033.jpg)
17. Сделал селект в другой сессии(не получил новую запись, так как уровень изоляции REPEATABLE READ, и селект сделан до завершения первой транзакции) ![5273775353778796034.jpg](images/5273775353778796034.jpg)
18. Завершил первую транзакцию и снова делаю селект в другой сессии(не получил новую запись, так как селект сделан в незавершенной транзакции и уровень изоляции REPEATABLE READ решает проблему аномалии неповторяющегося чтения) ![5273775353778796034.jpg](images/5273775353778796034.jpg)
19. Завершаю вторую транзакцию и делаю новый селект(получил новую запись) ![5273775353778796036.jpg](images/5273775353778796036.jpg)